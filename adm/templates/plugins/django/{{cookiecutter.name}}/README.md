Django Project Plugin Template
===============================


The plugin template named `django` enables to initialize a plugin containing
a single rough Django project and optionnally a first "hello-world" application
in this project.


Quickstart guide
-----------------

To create a plugin based on this template, just launch this command :

`bootstrap_plugin.py create name_of_your_plugin --template django`

The prompt asks you some questions then initialacizes your plugin.

The plugin is created in the current directory, inside the directory named
`name_of_your_plugin`.

If you answered to create an application in your django project, it will be a
"hello-world" application. You can check that it works by invoking the following
URL : 
http://localhost:18868/name_of_your_plugin/name_of_your_project/name_of_your_app


Options
--------

During the initialisation of your plugin, the prompt will ask you to choose a
value for each of these variables :
  - **name**: name of your plugin, the plugin will be initialized in a directory
with this name
  - **version**: version number of your plugin
  - **one_line_summary**: a short description of your plugin
  - **crontab_support**: whether you need to use the crontab inside your plugin
  - **license**: type of license attached to your plugin
  - **url**: the URL of the home page of your plugin
  - **maintainer**: your e-mail, something like "Firstname FAMILYNAME <email>"
  - **vendor**: why not "MetWork" ?
  - **type**: type of the HTTP server to use
  - **workers**: number of CPU cores to use
  - **project_name**: name of your first django project in this plugin, cannot
be empty
  - **db_type**: database type to use
  - **db_postgres_name**: name of your database (ignored if the type is not
postgres)
  - **db_postgres_host**: hostname where your database is located (ignored if
the type is not postgres)
  - **db_postgres_user**: username needed to connect to the database (ignored if
the type is not postgres)
  - **db_postgres_password**: password needed to connect to the database
(ignored if the type is not postgres)
  - **db_postgres_port**: port to connect to the database (ignored if the type
is not postgres)
  - **app_name**: name of your first application in the Django project (None to
skip the creation of an application)


Databases
----------

The created application can use either a postgres database either a sqlite3
database. In the first case, the parameters used to connect to the database are
chosen during the plugin initialisation process. In the second case, the file
name of the database is set to `db.sqlite3`. You may want to change it in the
file `settings.py` generated by the initialization process. Note that the
database is not created by the initialization process, neither is a superuser.


Virtual environment
--------------------

One your plugin is initalized, you will have a python virtual environment
containing a collection of modules. By default, you will get django 2.1.4
for python-3 of 1.11.18 for python-2 and psycopg2 2.7.6.1 if you use a
Postgres database. You can change it in the file
`pythonX_virtualenv_sources/requirements-to-freeze.txt`.


Django secret key
------------------

The secret key of your first project is randomly generated during the process.
Your project will own a secret key similar to the one that is set when you
create a new Django project with the Django command `django-admin startproject`.


More
-----

To add another Django project or application, you have to use the Django
commands once your plugin is created.

The `postinstall` script collects the static
files (it runs a `python manage.py collecstatic`) for the initial Django
project. You may have to modifiy `postinstall`, for example if you want to do
the same for other Django projects inside your plugin.

The `postinstall` script does not run `python manage.py createsuperuser` nor
`python manage.py migrate`.
